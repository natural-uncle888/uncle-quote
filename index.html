<!DOCTYPE html>

<html lang="zh-TW">
<head>
<meta charset="utf-8"/>
<title>è‡ªç„¶å¤§å” ç·šä¸Šå ±åƒ¹å–®</title>
<link href="https://res.cloudinary.com/dijzndzw2/image/upload/v1757176751/logo-3_hddq08.png" rel="icon" type="image/png"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
<style>
/* è®“å®Œæ•´é ç´„æ™‚é–“åœ¨æ‰‹æ©Ÿè‡ªå‹•æ–·æˆå…©è¡Œï¼šæ—¥æœŸä¸€è¡Œã€æ™‚é–“ä¸€è¡Œ */
#cleanFull .cf-date,
#cleanFull .cf-time { display: inline; }
@media (max-width: 576px){
  #cleanFull .cf-date,
  #cleanFull .cf-time { display: block; line-height: 1.25; }
}
/* mobile-confirm styles */
.mobile-bottom-bar{
  position: sticky; bottom: 0; left: 0; right: 0;
  padding-bottom: env(safe-area-inset-bottom);
}
.mobile-bottom-bar .total-strong{ font-weight: 800; }
#confirmBtnMobile{ min-width: 7em; }

html, body { overflow-x: hidden; }

    body { font-family: "Microsoft JhengHei", sans-serif; background:#eaeaea; }
    .container-quote {
      max-width: 800px; margin: 10px auto; background:#f9fcff;
      padding: 20px; border:1px solid #ddd; box-shadow:0 0 10px rgba(0,0,0,.1);
      position: relative; overflow: hidden;
    }
    .container-quote::before{
      content:""; position:absolute; inset:0;
      background-image:url('https://res.cloudinary.com/dijzndzw2/image/upload/v1756944900/2_oufdld.png'); background-repeat:repeat; background-size:800px;
      transform:rotate(-45deg); opacity:.02; z-index:0;
    }
    .container-quote > * { position:relative; z-index:1; }
    .logo { width:100%; max-height:150px; object-fit:contain; display:block; margin:0 auto 10px; }

    .quote-info { text-align:center; font-weight:700; color:#333; margin-bottom:14px; }
    .quote-info .qi-proj, .quote-info .qi-date, .quote-info .qi-sep { display:inline; }
    @media (max-width:576px){
      .quote-info .qi-proj, .quote-info .qi-date { display:block; }
      .quote-info .qi-sep { display:none; }
    }

    .section-title { margin-top:15px; font-weight:700; border-bottom:2px solid #444; padding-bottom:4px; }
    #cleanFullBox{
      font-size:1.4rem; font-weight:700; color:#fff; background:#0d6efd;
      border:2px solid #0a58ca; border-radius:8px; text-align:center; margin-top:10px;
    }

    .discount-note{ font-size:.75rem; color:green; display:block; }
    .link-box{ background:#eef6ff; border-radius:6px; padding:10px; margin-top:12px; word-wrap:break-word; }
    .link-box .input-group input { font-size:.95rem; }

    .footer-bar{ background:#dbe9f6; padding:12px; text-align:center; margin-top:20px; border-top:2px solid #bbb; }

    /* è¡Œå‹•ï¼šè¡¨æ ¼â†’å¡ç‰‡ */
    @media (max-width: 576px){
      #quoteTable thead { display: none; }
      #quoteTable, #quoteTable tbody, #quoteTable tr, #quoteTable td { display: block; width: 100%; }
      #quoteTable tbody tr{
        background:#fff; border:1px solid #ddd; border-radius:12px;
        padding:10px; margin:10px 0; box-shadow:0 2px 8px rgba(0,0,0,.05);
        display: grid; grid-template-columns: 1fr 1fr;
        grid-template-areas: "svc svc" "opt opt" "qty price" "sub ops";
        gap: 8px 12px;
      }
      #quoteTable td:nth-child(1){ grid-area: svc; }
      #quoteTable td:nth-child(2){ grid-area: opt; }
      #quoteTable td:nth-child(3){ grid-area: qty; }
      #quoteTable td:nth-child(4){ grid-area: price; }
      #quoteTable td:nth-child(5){ grid-area: sub; }
      #quoteTable td:nth-child(6){ grid-area: ops; }
      #quoteTable td{ border:0 !important; padding:0; }
      #quoteTable td::before{ content: attr(data-label); display:block; font-weight:700; color:#555; margin-bottom:4px; }
      #quoteTable td:nth-child(5) .subtotal{
        display:inline-block; font-size:1.1rem; font-weight:800; color:#d63384;
        padding:4px 8px; background:#fff0f6; border:1px solid #f3c2db; border-radius:8px;
      }
      #quoteTable td:nth-child(6) .btn{ width:100%; }
      body{ padding-bottom: 70px; }
    }

    /* æ‰‹æ©Ÿåº•éƒ¨å›ºå®šå·¥å…·åˆ—ï¼ˆåªç•™ç”¢ç”Ÿé€£çµï¼‰ */
    .mobile-bottom-bar{
      position: fixed; left:0; right:0; bottom:0; z-index: 1030;
      background: linear-gradient(180deg, #0d6efd 0%, #0b5ed7 100%); color:#fff;
      box-shadow: 0 -6px 20px rgba(13,110,253,.35);
      padding:10px 12px calc(10px + env(safe-area-inset-bottom, 0px));
      display:none; align-items:center; justify-content:space-between; gap: 10px;
    }
    @media (max-width: 768px){ .mobile-bottom-bar{ display:flex; } }
    .mobile-bottom-bar .total-strong{ font-weight: 900; font-size: 1.05rem; }
    .mobile-bottom-bar .btn{ margin-bottom:0; box-shadow: 0 2px 8px rgba(0,0,0,.2); }
    .mobile-bottom-bar .btn-outline-light{ border-color:#fff; color:#fff; }

    .total-banner{
      background: #fff7e6; border:1px solid #ffd8a8; color:#d9480f;
      border-radius:12px; padding:10px 14px; display:inline-block; font-weight:900;
      box-shadow: 0 2px 8px rgba(255,173,77,.15);
    }
    .total-banner #total{ font-size:1.4rem; }
  
    /* --- Payment highlight styles --- */
    .payment-highlight{
      background: linear-gradient(135deg, rgba(13,110,253,.08), rgba(25,135,84,.08));
      border: 1px dashed rgba(0,0,0,.12);
    }
    #bankBox.pulse{ animation: pulseBox 1.2s ease-out 1; }
    @keyframes pulseBox{
      0%{ box-shadow: 0 0 0 0 rgba(13,110,253,.25); }
      100%{ box-shadow: 0 0 0 18px rgba(13,110,253,0); }
    }
    
</style>
<style>
  /* å·²ä½œå»¢è¦–è¦ºåŠ å¼· */
  #cancelBanner {
    position: relative;
    margin: 12px 0 16px;
    padding: 14px 18px;
    border-radius: .75rem;
    background: #fde7e9;
    border: 1px solid #f3b6bc;
    color: #b3202a;
    font-weight: 700;
    text-align: center;
  }
  /* æµ®æ°´å°ï¼šå…¨åŸŸç‹€æ…‹ */
  .cancelled-watermark {
    position: relative;
  }
  .cancelled-watermark::after {
    content: "å·²ä½œå»¢";
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-18deg);
    font-size: clamp(64px, 12vw, 140px);
    color: rgba(179, 32, 42, 0.12);
    font-weight: 800;
    letter-spacing: .2em;
    pointer-events: none;
    z-index: 999;
    white-space: nowrap;
  }
</style>
<style id="cancel-modal-style">
  .cancel-modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:2147483000;}
  .cancel-modal{background:#fff;max-width:520px;width:90%;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.2);overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
  .cancel-modal header{background:#ffe5e5;padding:14px 18px;font-weight:700;color:#7a1f1f;font-size:18px;display:flex;gap:8px;align-items:center;}
  .cancel-modal .body{padding:18px;color:#333;line-height:1.6;font-size:16px;}
  .cancel-modal .actions{display:flex;gap:10px;justify-content:flex-end;padding:0 18px 18px;}
  .cancel-modal .btn{padding:10px 14px;border-radius:10px;border:1px solid #ccc;background:#f8f8f8;cursor:pointer;font-size:14px;}
  .cancel-modal .btn.primary{background:#d32f2f;color:#fff;border-color:#d32f2f;}
  .cancel-modal .badge{display:inline-block;background:#d32f2f;color:#fff;border-radius:999px;padding:4px 12px;font-size:16px;margin-left:6px;}
</style>
<style id="confirm-modal-style">
  .confirm-modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:2147483001;}
  .confirm-modal{background:#fff;max-width:520px;width:90%;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.2);overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
  .confirm-modal header{background:#e6f4ea;padding:14px 18px;font-weight:700;color:#0f5132;font-size:18px;display:flex;gap:8px;align-items:center;}
  .confirm-modal .body{padding:18px;color:#333;line-height:1.6;font-size:16px;}
  .confirm-modal .actions{display:flex;gap:10px;justify-content:flex-end;padding:0 18px 18px;}
  .confirm-modal .btn{padding:10px 14px;border-radius:10px;border:1px solid #ccc;background:#f8f8f8;cursor:pointer;font-size:14px;}
  .confirm-modal .btn.primary{background:#198754;color:#fff;border-color:#198754;}
  .confirm-modal .badge{display:inline-block;background:#198754;color:#fff;border-radius:999px;padding:2px 10px;font-size:12px;margin-left:6px;}
</style>
<style>
/* === Mobile bottom bar â€” emphasized action buttons === */
:root{
  --mbb-btn-radius: 14px;
}

.mobile-bottom-bar{
  padding: 12px 12px calc(12px + env(safe-area-inset-bottom, 0px));
  gap: 12px;
}

.mobile-bottom-bar .action-btn{
  flex: 1 1 0;
  height: 56px;
  min-height: 56px;
  font-size: 16px;
  font-weight: 800;
  letter-spacing: .02em;
  border-radius: var(--mbb-btn-radius);
  border-width: 2px;
  box-shadow: 0 3px 10px rgba(0,0,0,.25);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
}

.mobile-bottom-bar .action-share{
  background: #212529;
  color: #fff;
  border-color: #212529;
}

.mobile-bottom-bar .action-cancel{
  background: #dc3545;
  color: #fff;
  border-color: #dc3545;
}

.mobile-bottom-bar .action-confirm{
  background: #198754;
  color: #fff;
  border-color: #198754;
}

.mobile-bottom-bar .action-btn:hover{
  filter: brightness(1.05);
  transform: translateY(-1px);
}
.mobile-bottom-bar .action-btn:active{
  transform: translateY(0);
  filter: brightness(.98);
}

.mobile-bottom-bar .action-btn:focus-visible{
  outline: 3px solid #fff;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(0,0,0,.35);
}

@media (max-width: 360px){
  .mobile-bottom-bar .action-btn{
    font-size: 15px;
  }
}
</style><style>
/* === Mobile bottom bar â€” total as two lines === */
.mobile-bottom-bar{
  align-items: stretch;
}
.mobile-bottom-bar .total-strong{
  line-height: 1.1;
  display: inline-flex;
  flex-direction: column;
  justify-content: center;
  min-width: 86px;          /* é¿å…æ“ å£“ */
}
.mobile-bottom-bar .total-strong .label{
  font-size: 12px;
  opacity: 0.85;
}
.mobile-bottom-bar .total-strong .amount{
  font-size: 18px;
  font-weight: 800;
}
@media (max-width: 360px){
  .mobile-bottom-bar .total-strong .amount{
    font-size: 17px;
  }
}
</style><style>
/* === Fix: ensure button row visible and share button full-width === */
.mobile-bottom-bar .buttons-row{
  display: flex;
  gap: 12px;
  flex: 1 1 auto;
  min-width: 0;
}
.mobile-bottom-bar .action-share{
  flex: 1 1 0;
}
</style></head>
<body>
<div class="d-none" id="cancelBanner">âš ï¸ æœ¬å ±åƒ¹å–®å·²ä½œå»¢</div>
<div class="container-quote">
<div class="text-center">
<img alt="è‡ªç„¶å¤§å” Logo" class="logo" src="https://res.cloudinary.com/dijzndzw2/image/upload/v1756944900/2_oufdld.png"/>
</div>
<div class="quote-info" id="quoteInfo"></div>
<!-- ä½œå»¢æ©«å¹… -->
<div class="alert alert-danger d-none" id="cancelBanner" role="alert"></div>
<!-- å®¢æˆ¶è³‡è¨Š -->
<h5 class="section-title">å®¢æˆ¶è³‡è¨Š</h5>
<div class="row g-2 mb-3">
<div class="col-md-6 col-12">
<label>å§“å</label>
<input class="form-control" id="customerName" placeholder="å®¢æˆ¶å§“å" type="text"/>
</div>
<div class="col-md-6 col-12">
<label>é›»è©±</label>
<input class="form-control" id="customerPhone" type="text"/>
</div>
</div>
<div class="row g-2 mb-3">
<div class="col-12">
<label>åœ°å€</label>
<input class="form-control" id="customerAddress" placeholder="æœå‹™åœ°å€" type="text"/>
</div>
</div>
<!-- æŠ€å¸«è³‡è¨Š -->
<h5 class="section-title">æŠ€å¸«äººå“¡è³‡è¨Š</h5>
<div class="row g-2 mb-3">
<div class="col-md-6 col-12">
<label>æŠ€å¸«å§“å</label>
<input class="form-control" id="technicianName" type="text" value="æ—å®¥é¨°"/>
</div>
<div class="col-md-6 col-12">
<label>æŠ€å¸«è¯çµ¡é›»è©±</label>
<input class="form-control" id="technicianPhone" type="text" value="0912-356331"/>
</div>
</div>
<!-- é ç´„æ™‚é–“ -->
<h5 class="section-title">é ç´„æ¸…æ´—æ™‚é–“</h5>
<div class="p-3" id="cleanFullBox">
    ğŸ•’ å®Œæ•´é ç´„æ™‚é–“ï¼š<span id="cleanFull">å°šæœªé¸æ“‡</span>
<div class="row g-2 mt-2">
<div class="col-6"><input class="form-control" id="cleanDate" type="date"/></div>
<div class="col-6"><input class="form-control" id="cleanTime" type="time"/></div>
</div>
</div>
<!-- æœå‹™é …ç›® -->
<h5 class="section-title">æœå‹™é …ç›®</h5>
<div class="table-responsive">
<table class="table table-bordered bg-white" id="quoteTable">
<thead class="table-light">
<tr>
<th>é …ç›®åç¨±</th>
<th>è£œå……èªªæ˜</th>
<th>æ•¸é‡</th>
<th>å–®åƒ¹</th>
<th>å°è¨ˆ</th>
<th>æ“ä½œ</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<select class="form-select service">
<option value="">è«‹é¸æ“‡</option>
<option value="å†·æ°£æ¸…æ´—">å†·æ°£æ¸…æ´—</option>
<option value="æ´—è¡£æ©Ÿæ¸…æ´—">æ´—è¡£æ©Ÿæ¸…æ´—</option>
<option value="é˜²éœ‰è™•ç†">é˜²éœ‰è™•ç†</option>
<option value="è‡­æ°§æ®ºèŒ">è‡­æ°§æ®ºèŒ</option>
<option value="è®Šå½¢é‡‘å‰›æ©Ÿå‹">è®Šå½¢é‡‘å‰›æ©Ÿå‹</option>
<option value="ä¸€é«”å¼æ°´ç›¤æ©Ÿå‹">ä¸€é«”å¼æ°´ç›¤æ©Ÿå‹</option>
<option value="è¶…é•·è²»ç”¨">è¶…é•·è²»ç”¨</option>
<option value="è‡ªä¾†æ°´ç®¡æ¸…æ´—">è‡ªä¾†æ°´ç®¡æ¸…æ´—</option>
<option value="æ°´å¡”æ¸…æ´—">æ°´å¡”æ¸…æ´—</option>
</select>
</td>
<td>
<select class="form-select option">
<option value="">è«‹é¸æ“‡</option>
<option>åˆ†é›¢å¼ï¼ˆå£æ›å¼ï¼‰</option>
<option>åŠéš±å¼ï¼ˆéš±è—å¼ï¼‰</option>
<option>ç›´ç«‹å¼</option>
<option>å®¶ç”¨</option>
<option>ç‰¹æ®Šæ©Ÿå‹é¡å¤–åŠ æ”¶è²»</option>
<option>å†·æ°£é˜²éœ‰è™•ç†ï¼ˆæŠ‘èŒå™´åŠ‘ï¼‰</option>
<option>é«˜è‡­æ°§æ®ºèŒ30åˆ†é˜</option>
<option>åŠ è³¼åƒ¹</option>
<option>ç„¡å»šä¸€è¡›</option>
<option>ä¸€å»šä¸€è¡›</option>
<option>ä¸€å»šå…©è¡›</option>
<option>ä¸€å»šä¸‰è¡›</option>
<option>ä¸€å»šå››è¡›</option>
</select>
</td>
<td><input class="form-control qty" min="1" type="number" value="1"/></td>
<td>
<input class="form-control price" type="number" value="0"/>
<small class="discount-note"></small>
</td>
<td class="subtotal">0</td>
<td><button class="btn btn-danger btn-sm removeRow">åˆªé™¤</button></td>
</tr>
</tbody>
</table>
</div>
<button class="btn btn-primary mb-2" id="addRow">â• æ–°å¢é …ç›®</button>
<!-- å…¶ä»–äº‹é … -->
<h5 class="section-title">å…¶ä»–äº‹é …</h5>
<textarea class="form-control" id="otherNotes" rows="3">æœ€çµ‚è²»ç”¨å°‡ä¾ç¾å ´å¯¦éš›ç‹€æ³é€²è¡Œèª¿æ•´ï¼Œå¦‚æœ‰é¡å¤–é …ç›®ï¼Œå°‡äº‹å‰èˆ‡æ‚¨èªªæ˜èˆ‡å ±åƒ¹ã€‚</textarea>
<!-- åˆè¨ˆ -->
<div id="totalContainer"></div><div class="form-check mt-2"><input class="form-check-input" id="toggleTax" type="checkbox"/><label class="form-check-label" for="toggleTax">é¡¯ç¤ºå«ç¨…é‡‘é¡</label></div><h5 class="mt-2 total-banner text-success d-none" id="taxBox">å«ç¨… (5%)ï¼š<span id="totalWithTax">0</span> å…ƒ</h5>
<!-- Payment Methods (Enhanced) -->
<section class="mt-3" id="payment">
<div class="payment-highlight d-flex align-items-center gap-2 p-3 mb-2 rounded-3">
<div class="flex-shrink-0" style="font-size:2rem">ğŸ’³</div>
<div>
<h2 class="m-0 fw-bold">ä»˜æ¬¾æ–¹å¼</h2>
<p class="small text-muted mb-0">å®Œå·¥ç•¶æ—¥ä»˜æ¬¾ï¼›æ¬²åŒ¯æ¬¾å¯é»æ“Šä¸‹æ–¹æŒ‰éˆ•æŸ¥çœ‹è³‡è¨Šä¸¦ä¸€éµè¤‡è£½ã€‚</p>
</div>
<div class="ms-auto d-none d-md-block">
<span class="badge text-bg-success me-1">ç¾å ´ä»˜æ¬¾</span>
<span class="badge text-bg-primary">åŒ¯æ¬¾ / è½‰å¸³</span>
</div>
</div>
<div class="card shadow-sm border-0 overflow-hidden">
<div class="card-body">
<ul class="mb-3">
<li><strong>ä»˜æ¬¾æ¢ä»¶ï¼š</strong>å®Œå·¥å¾Œç¾å ´ä»˜æ¬¾æˆ–åŒ¯æ¬¾</li>
<li><strong>ä»˜æ¬¾æœŸé™ï¼š</strong><span class="badge rounded-pill text-bg-warning align-middle">ç•¶æ—¥ä»˜æ¬¾å®Œæˆ</span></li>
</ul>
<div class="row gy-2">
<div class="col-12 col-md-6 d-grid">
<button class="btn btn-primary btn-lg" id="toggleAccountBtn" type="button">
                æŸ¥çœ‹åŒ¯æ¬¾è³‡è¨Š
              </button>
</div>
<div class="col-12 col-md-6 d-grid">
<a class="btn btn-outline-success btn-lg d-none d-md-block" href="https://lin.ee/OHk6Rn7" rel="noopener" target="_blank">
                é€é LINE æ´½è©¢ä»˜æ¬¾
              </a>
</div>
</div>
<div class="link-box mt-3 d-none" id="bankBox">
<div class="d-flex align-items-center justify-content-between mb-2">
<div class="fw-bold">åŒ¯æ¬¾å¸³è™Ÿï¼ˆå¯è¤‡è£½ï¼‰</div>
<div class="d-none d-md-flex align-items-center gap-2 opacity-75 small">
<span>ATM</span> Â· <span>ç¶²éŠ€</span> Â· <span>è¡Œå‹•éŠ€è¡Œ</span>
</div>
</div>
<div class="text-muted mb-2" id="bankMeta">
              éŠ€è¡Œï¼šå°æ–°éŠ€è¡Œï¼ˆ812ï¼‰ã€€æˆ¶åï¼šæ—å®¥é¨°
            </div>
<div class="input-group">
<input aria-label="åŒ¯æ¬¾å¸³è™Ÿï¼ˆåƒ…æ•¸å­—ï¼Œå¯è¤‡è£½ï¼‰" class="form-control form-control-lg" id="bankAccount" inputmode="numeric" readonly="" type="text" value="28881000063784"/>
<button class="btn btn-primary" id="copyAccountBtn" type="button">ğŸ“‹ è¤‡è£½å¸³è™Ÿ</button>
</div>
<small class="text-muted d-block mt-2">å¦‚éœ€çµ±ç·¨æˆ–ä¸‰è¯å¼ç™¼ç¥¨ï¼Œè«‹æ–¼åŒ¯æ¬¾å‚™è¨»å¡«å¯«ä¸¦å¦è¡Œå‘ŠçŸ¥ã€‚</small>
</div>
</div>
</div>
</section>
<!-- å‚™è¨»èˆ‡ä¿å›ºæ¢æ¬¾ -->
<h5 class="section-title">å‚™è¨»èˆ‡ä¿å›ºæ¢æ¬¾</h5>
<ol>
<li>è«‹æ–¼ç¢ºèªæœ¬å ±åƒ¹å…§å®¹ç„¡èª¤å¾Œï¼Œä»¥æŒ‰ä¸‹ã€Œæˆ‘åŒæ„æ­¤å ±åƒ¹ã€æŒ‰éˆ•å›è¦†ï¼Œä»¥åˆ©å¾ŒçºŒå®‰æ’ä½œæ¥­ã€‚</li>
<li>æ–½ä½œéç¨‹æ­¡è¿æ‚¨å…¨ç¨‹åœ¨å ´åƒèˆ‡ï¼Œç¢ºä¿æ–½å·¥éç¨‹é€æ˜ã€ä¿éšœé›™æ–¹æ¬Šç›Šã€‚</li>
<li>æ–½ä½œå‰çš†æœƒé€²è¡ŒåŸºæœ¬åŠŸèƒ½æª¢æ¸¬ï¼Œç¢ºèªæ©Ÿæ³æ­£å¸¸å¾Œå†é€²è¡Œæ¸…æ´—ä¿é¤Šä½œæ¥­ã€‚</li>
<li>æ–½ä½œå¦‚æœ‰æ‹æ”ç…§ç‰‡æˆ–å½±ç‰‡ï¼Œå¯å…è²»æä¾›çµ¦æ‚¨åšç‚ºç´€éŒ„èˆ‡å‚™å­˜åƒè€ƒã€‚</li>
<li>æœ¬æœå‹™äº«æœ‰14å¤©ä¿å›ºæœŸï¼Œå¦‚æœ‰ç•°å¸¸ä½¿ç”¨ç‹€æ³ï¼Œè«‹ç«‹å³å›å ±ï¼Œæˆ‘å€‘å°‡å®‰æ’å°ˆäººè™•ç†ï¼ˆâ€»ä¿å›ºä¸åŒ…å«å› å®‰è£ä¸è‰¯æˆ–é›¶ä»¶è‡ªç„¶è€åŒ–æ‰€å°è‡´ä¹‹å•é¡Œï¼‰ã€‚</li>
<li>è‹¥æ‚¨æœ‰ä»»ä½•ç–‘å•æˆ–éœ€é€²ä¸€æ­¥å”åŠ©ï¼Œæ­¡è¿ç›´æ¥åŠ å…¥ LINE å®˜æ–¹å¸³è™Ÿï¼Œæˆ‘å€‘å°‡èª æ‘¯ç‚ºæ‚¨æœå‹™ã€‚</li>
</ol>
<!-- è¯çµ¡è³‡è¨Š -->
<h5 class="section-title">è¯çµ¡è³‡è¨Š</h5>
<div class="row align-items-start">
<div class="col-md-6 col-12 mb-2">
<p><b>è‡ªç„¶å¤§å” / æ—å®¥é¨°</b><br/>
      é›»è©±ï¼š0912-356331<br/>
      Emailï¼šnatural.uncle@gmail.com</p>
</div>
<div class="col-md-6 col-12 text-center">
<div class="d-grid gap-2">
<a class="btn btn-success" href="https://lin.ee/OHk6Rn7" target="_blank">ğŸŸ¢ LINE å®˜æ–¹å¸³è™Ÿ</a>
<a aria-label="å‰å¾€è‡ªç„¶å¤§å”å®˜æ–¹ç¶²ç«™" class="btn contact-site-btn d-inline-flex align-items-center justify-content-center" href="https://natural-uncle-official.netlify.app/" rel="noopener" style="background: linear-gradient(90deg, #FE7200, #FE8E01); color:#fff; border:none;" target="_blank"><img alt="è‡ªç„¶å¤§å” LOGO" class="me-2" height="22" src="https://res.cloudinary.com/dijzndzw2/image/upload/v1757176751/logo-3_hddq08.png" width="22"/>å®˜æ–¹ç¶²ç«™</a>
<a class="btn btn-primary" href="https://www.facebook.com/naturaluncle" target="_blank">ğŸ”µ Facebook ç²‰çµ²å°ˆé </a>
</div>
</div>
</div>
<!-- ç·¨è¼¯æ¨¡å¼ï¼šæ¡Œæ©Ÿå¯ç”¢ç”Ÿé€£çµ -->
<div class="mt-3 text-center">
<button class="btn btn-secondary" id="shareLinkBtn">ğŸ”— ç”¢ç”Ÿå ±åƒ¹å–®é€£çµ</button>
</div>
<!-- å”¯è®€ï¼ˆæ¡Œæ©Ÿï¼‰åŒæ„æŒ‰éˆ•ï¼šå”¯è®€æœªå°å­˜æ‰é¡¯ç¤ºï¼›å–æ¶ˆ/ä½œå»¢ç”± admin é¡¯ç¤º -->
<div class="text-center mt-3 d-none" id="readonlyActions">
<button class="btn btn-outline-primary" id="confirmBtnDesktop">âœ… æˆ‘åŒæ„æ­¤å ±åƒ¹</button>
<button class="btn btn-outline-danger ms-2 d-none" id="cancelBtnDesktop">å–æ¶ˆ/ä½œå»¢</button>
</div>
<div class="link-box d-none" id="shareLinkBox"></div>
</div>
<!-- æ‰‹æ©Ÿåº•éƒ¨å›ºå®šå·¥å…·åˆ—ï¼šåªä¿ç•™ã€Œç”¢ç”Ÿé€£çµã€ -->
<div class="mobile-bottom-bar d-md-none">
<div class="total-strong"><span class="label">åˆè¨ˆï¼š</span><br/><span class="amount"><span id="totalMobile">0</span> å…ƒ</span> <span id="totalMobileTag" class="ms-1 small fw-bold text-white d-none">(å«ç¨…)</span></div>
<div class="d-flex gap-2 buttons-row flex-grow-1">
<button aria-label="ç”¢ç”Ÿå ±åƒ¹å–®é€£çµ" class="btn action-btn action-share flex-fill" id="shareLinkBtnMobile">
          ç”¢ç”Ÿé€£çµ
        </button>
<button aria-label="å–æ¶ˆæˆ–ä½œå»¢æœ¬å ±åƒ¹å–®" class="btn action-btn action-cancel flex-fill d-none" id="cancelBtnMobile">
          å–æ¶ˆ/ä½œå»¢
        </button>
<button aria-label="æˆ‘åŒæ„æ­¤å ±åƒ¹" class="btn action-btn action-confirm flex-fill d-none" id="confirmBtnMobile">
          æˆ‘åŒæ„æ­¤å ±åƒ¹
        </button>
</div>
</div>
<div class="footer-bar"><small>Â© 2025 è‡ªç„¶å¤§å” All Rights Reserved</small></div>
<!-- å¤–éƒ¨ JSï¼šé¿å… CSP æ“‹ä¸‹ inline -->
<script defer="" src="app.js"></script>
<script>
(function() {
  function isMobile() { return window.matchMedia('(max-width: 767.98px)').matches; }
  function getTotal() {
    var el = document.getElementById('totalMobile');
    if (!el) return 0;
    var t = (el.textContent || '').replace(/[^0-9.]/g, '');
    var n = parseFloat(t || '0');
    return isNaN(n) ? 0 : n;
  }
  function toggleBar() {
    var bar = document.querySelector('.mobile-bottom-bar');
    if (!bar) return;
    var cancelBtn = document.getElementById('cancelBtnMobile');
    var confirmBtn = document.getElementById('confirmBtnMobile');
    var shareBtn = document.getElementById('shareLinkBtnMobile');

    if (isMobile() && getTotal() === 0 && !window.__hasEditedQuote__) {
      // å°šæœªç·¨è¼¯ï¼šæ•´å€‹è¡Œå‹•åˆ—éš±è—
      bar.classList.add('d-none');
    } else {
      // å·²ç·¨è¼¯æˆ– total>0ï¼šé¡¯ç¤ºè¡Œå‹•åˆ—ï¼Œåªä¿ç•™åˆ†äº«æŒ‰éˆ•
      bar.classList.remove('d-none');
      if (cancelBtn) cancelBtn.classList.add('d-none');
      if (confirmBtn) confirmBtn.classList.add('d-none');
      if (shareBtn) {
        shareBtn.classList.remove('d-none');
        // è‹¥è¢«å…¶å®ƒç‹€æ…‹é¡åˆ¥éš±è—ï¼Œæ¸…é™¤å¸¸è¦‹éš±è—é¡åˆ¥
        shareBtn.classList.remove('disabled');
        shareBtn.removeAttribute('disabled');
        shareBtn.style.display = '';
        shareBtn.style.visibility = '';
      }
    }
  }

  // ç›£è½é‡‘é¡ç¯€é»è®ŠåŒ–
  var totalEl = document.getElementById('totalMobile');
  if (totalEl && 'MutationObserver' in window) {
    var obs = new MutationObserver(toggleBar);
    obs.observe(totalEl, { childList: true, characterData: true, subtree: true });
  }

  // ç›£è½è¼¸å…¥å‹•ä½œï¼ˆè¦–ç‚ºå·²ç·¨è¼¯ï¼‰
  function markEdited() {
    window.__hasEditedQuote__ = true;
    toggleBar();
  }
  document.addEventListener('input', markEdited, { passive: true });
  document.addEventListener('change', markEdited, { passive: true });

  // åˆå§‹åŒ–
  window.addEventListener('resize', toggleBar);
  document.addEventListener('DOMContentLoaded', toggleBar);
  toggleBar();
})();
</script><script>
// MBB_LOGIC_V4B
(function() {
  function isMobile() { return window.matchMedia('(max-width: 767.98px)').matches; }
  function getTotal() {
    var el = document.getElementById('totalMobile');
    if (!el) return 0;
    var t = (el.textContent || '').replace(/[^0-9.]/g, '');
    var n = parseFloat(t || '0');
    return isNaN(n) ? 0 : n;
  }
  function hasEdited() {
    return !!window.__hasEditedQuote__ || getTotal() > 0;
  }
  function isReadOnly() {
    // æœ‰ä»»ä¸€å¯ç·¨è¼¯æ¬„ä½å°±è¦–ç‚ºå¯ç·¨è¼¯ï¼›å…¨éƒ¨ä¸å¯ç·¨è¼¯å‰‡å”¯è®€
    var fields = Array.prototype.slice.call(document.querySelectorAll('input, select, textarea'));
    if (fields.length === 0) return false;
    var anyEditable = fields.some(function(el){ return !el.disabled && !el.readOnly; });
    return !anyEditable;
  }
  function isPendingStatus() {
    var statusEl = document.querySelector('[data-quote-status], #quoteStatus, input[name="quoteStatus"]');
    var statusTxt = "";
    if (statusEl) {
      statusTxt = (statusEl.dataset && statusEl.dataset.quoteStatus) || statusEl.value || statusEl.textContent || "";
      statusTxt = (statusTxt + "").toLowerCase();
    }
    if (statusTxt.indexOf('pending') >= 0 || statusTxt.indexOf('å¾…ç¢ºèª') >= 0 || statusTxt.indexOf('å¾…ç¡®è®¤') >= 0) {
      return true;
    }
    // å¾Œå‚™ï¼šå”¯è®€ä¸”å­˜åœ¨ç¢ºèªæŒ‰éˆ•
    return isReadOnly() && !!document.getElementById('confirmBtnMobile');
  }

  function show(el){ if (el) el.classList.remove('d-none'); }
  function hide(el){ if (el) el.classList.add('d-none'); }

  function applyMobileBarLogic() {
    if (!isMobile()) return;
    var bar = document.querySelector('.mobile-bottom-bar');
    if (!bar) return;

    var shareBtn = document.getElementById('shareLinkBtnMobile');
    var cancelBtn = document.getElementById('cancelBtnMobile');
    var confirmBtn = document.getElementById('confirmBtnMobile');

    if (isPendingStatus()) {
      // å”¯è®€å¾…ç¢ºèªï¼šé¡¯ç¤ºåˆè¨ˆï¼†å–æ¶ˆ/åŒæ„ï¼›éš±è—åˆ†äº«
      bar.classList.remove('d-none');
      hide(shareBtn);
      show(cancelBtn);
      show(confirmBtn);
    } else if (!hasEdited()) {
      // å°šæœªç·¨è¼¯ï¼šåªé¡¯ç¤ºåˆ†äº«
      bar.classList.remove('d-none');
      show(shareBtn);
      hide(cancelBtn);
      hide(confirmBtn);
    } else {
      // å…¶ä»–ç‹€æ…‹ï¼šä¸ä»‹å…¥ï¼Œä¿ç•™åŸæœ‰é é¢é‚è¼¯
    }
  }

  // ç›£è½é‡‘é¡èˆ‡è¼¸å…¥ã€å°ºå¯¸è®Šæ›´
  var totalEl = document.getElementById('totalMobile');
  if (totalEl && 'MutationObserver' in window) {
    var obs = new MutationObserver(applyMobileBarLogic);
    obs.observe(totalEl, { childList: true, characterData: true, subtree: true });
  }
  function markEdited(){ window.__hasEditedQuote__ = true; applyMobileBarLogic(); }
  document.addEventListener('input', markEdited, { passive: true });
  document.addEventListener('change', markEdited, { passive: true });
  window.addEventListener('resize', applyMobileBarLogic);
  document.addEventListener('DOMContentLoaded', applyMobileBarLogic);
  // è‹¥æ­¤è…³æœ¬åœ¨ DOMContentLoaded ä¹‹å¾Œæ’å…¥ï¼Œç«‹å³åŸ·è¡Œä¸€æ¬¡
  applyMobileBarLogic();
})();
</script></body>
</html>
